# SQL-pr
Вы работаете аналитиком в сфере развития игр — геймдеве.

Ваша задача — разобраться с основными метриками и оценить текущую ситуацию в вашей компании. 

Ваша игра называется Zombie Revolution, основная цель в ней — это отстроить свою собственную базу и удерживать ее от постоянных набегов орд зомби. Для построения базы, найма дополнительных военных, развития инфраструктуры и военного производства игроку потребуются ресурсы и игровая валюта (кристаллы и золотые монеты). И ресурсы, и игровую валюту можно получить за длительные и эффективные усилия в обороне своей крепости, а также за донаты, то есть реальные деньги. Можно за реальные деньги получать не только валюту и ресурсы, а также некоторые отдельные товары, такие как военная техника или вооружение для защитников крепости.

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
Начнем с ознакомления с базой данных skygame.

Описание данных

game_sessions\
id_user — уникальный идентификатор пользователя\
start_session — дата + время начала игровой сессии\
end_session — дата + время конца игровой сессии

users\
id_user — уникальный идентификатор пользователя\
reg_date — дата регистрации\
dev_type — тип устройства (iOS/Android)

monetary\
id_user — уникальный идентификатор пользователя\
dtime_pay — дата + время оплаты\
id_item_buy — уникальный идентификатор купленного игрового объекта\
cnt_buy — количество купленных объектов

referral\
id_user — уникальный идентификатор пользователя\
ref_reg — флаг, показывающий, зарегистрировался ли «приведенный друг» в игре

log_prices\
id_item — уникальный идентификатор игрового объекта\
price — цена во временном диапазоне\
valid_from — дата старта диапазона\
valid_to — дата конца диапазона

item_list\
id_item — уникальный идентификатор игрового объекта\
name_item — наименование игрового объекта\
type — тип игрового объекта

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
###Задание 1
-
Поработаем с таблицей users.

1. Исследуйте выборку пользователей в таблице\
  -Сколько всего пользователей в нашей базе?\
  -Есть ли пользователи, которые регистрировались больше одного раза?\
  -Если да, то сколько их и по сколько раз они регистрировались?

2.Исследуйте время регистрации пользователей\
  -Какое минимальное и максимальное время регистрации в нашей витрине?\
  -Есть ли клиенты с неопределенным временем регистрации?

3.Исследуйте динамику пользовательской базы\
  -Растет ли наша пользовательская база с течением времени?\
  -Какой месяц показал наибольшее количество зарегистрированных пользователей?

###Задание 2
-
Перейдем к таблице game_sessions и исследуем количество и качество игровых сессий наших пользователей.

1.Определите суммарное количество игровых сессий за всё время.
2.Определите суммарное количество игровых сессий дольше 5 минут.

Постарайтесь объединить ответы на пункты 1 и 2 в один запрос.

3.Постройте распределение по месяцам:\
  -суммарного количества игровых сессий,\
  -суммарного количества сессий дольше 5 минут,\
  -доли сессий дольше 5 минут среди всех сессий.

В дальнейшем анализе отсеем все сессии меньше 5 минут.

4.Постройте динамику средней длительности одной игровой сессии по месяцам.
5.Постройте динамику доли «длинных» сессий среди всех сессий. В качестве границы длины можно взять, например, 1 час.

###Задание 3
-
Теперь изучим таблицу referral.

В ней хранится информация о приглашениях, которые наши пользователи рассылают своим друзьям, чтобы привлечь их в игру.

1.Определите общее количество разосланных приглашений, а также количество пользователей, которые эти приглашения рассылали\
2.Какая доля приглашенных друзей установила игру? (поле ref_reg)\
3.Выведите топ-50 пользователей, у которых больше всего приглашений\
4.Выведите тех пользователей, которые сделали больше 5 приглашений и у которых минимум половина приглашенных зарегистрировались.\
5.Есть ли пользователи, у которых больше (строго) 6 приглашений, но нет ни одного зарегистрированного друга?
